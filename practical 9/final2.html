<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Personal Dashboard</title>
<style>
  body {
    font-family: Verdana, sans-serif;
    text-align: center;
    padding: 20px;
    transition: all 0.3s ease;
  }
  .light { background: white; color: black; }
  .dark { background: #121212; color: white; }

  button, select, input, textarea {
    margin: 6px;
    padding: 8px 12px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }

  textarea { display: block; margin: 10px auto; width: 80%; }
</style>
</head>
<body>
  <h1 id="welcomeText">Welcome!</h1>

  <div>
    <input type="text" id="userName" placeholder="Enter your name">
    <button id="saveUser">Save Name</button>
  </div>

  <div>
    <button id="themeBtn">Switch Theme</button>
    <select id="fontSize">
      <option value="small">Small</option>
      <option value="medium">Medium</option>
      <option value="large">Large</option>
    </select>
  </div>

  <p id="visitCount"></p>

  <h3>Feedback</h3>
  <textarea id="feedback" rows="4" placeholder="Type your feedback here..."></textarea>

  <br>
  <button id="resetBtn">Reset Preferences</button>

<script>

let theme = localStorage.getItem("theme") || "light"; 
document.body.classList.add(theme);

document.getElementById("themeBtn").onclick = function() {

  theme = (theme === "light") ? "dark" : "light";
  document.body.classList.remove("light", "dark");
  document.body.classList.add(theme);
  localStorage.setItem("theme", theme);
};

let font = localStorage.getItem("fontSizePref") || "medium";
document.body.style.fontSize = font === "small" ? "13px" :
                              font === "large" ? "20px" : "16px";
document.getElementById("fontSize").value = font;

document.getElementById("fontSize").onchange = function() {
  font = this.value;
  localStorage.setItem("fontSizePref", font);
  document.body.style.fontSize = font === "small" ? "13px" :
                                font === "large" ? "20px" : "16px";
};

let savedName = localStorage.getItem("username");
if (savedName) {
  document.getElementById("welcomeText").innerText = "Welcome, " + savedName + "!";
}

document.getElementById("saveUser").onclick = function() {
  let name = document.getElementById("userName").value.trim();
  if (name) {
    localStorage.setItem("username", name);
    document.getElementById("welcomeText").innerText = "Welcome, " + name + "!";
    document.getElementById("userName").value = "";
  }
};

let visits = sessionStorage.getItem("visits");

if (!visits) {
  visits = 0; 
} else {
  visits = Number(visits) + 1; 
}

sessionStorage.setItem("visits", visits);

document.getElementById("visitCount").innerText =
  "This tab has been refreshed " + visits + " time(s).";

let savedFeedback = sessionStorage.getItem("feedbackText");
if (savedFeedback) {
  document.getElementById("feedback").value = savedFeedback;
}
document.getElementById("feedback").addEventListener("input", function() {
  sessionStorage.setItem("feedbackText", this.value);
});

document.getElementById("resetBtn").onclick = function() {
  localStorage.clear(); 
  location.reload();    
};
</script>
</body>
</html>
