<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Personal Dashboard</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  body {
    font-family: Verdana, sans-serif;
    transition: all 0.4s ease;
    text-align: center;
    padding: 20px;
  }
  .dark { background-color: #121212; color: white; }
  .light { background-color: #ffffff; color: black; }
  #controls button, select, input, textarea {
    margin: 6px;
    padding: 8px 14px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
  }
  textarea { display: block; margin: 12px auto; }
</style>
</head>
<body>
  <h1 id="welcomeText">Welcome!</h1>

  <div id="controls">
    <input type="text" id="userName" placeholder="Enter your name">
    <button id="saveUser">Save Name</button>

    <button id="themeBtn">Switch Theme</button>

    <select id="fontChooser" aria-label="Font size">
      <option value="small">Small</option>
      <option value="medium">Medium</option>
      <option value="large">Large</option>
    </select>

    <button id="resetPrefs">Reset Preferences</button>
  </div>

  <p id="tabCounter"></p>

  <h3>Feedback</h3>
  <textarea id="feedback" rows="5" cols="40" placeholder="Your feedback..."></textarea>

<script>

(function setupTheme() {
  const THEME_KEY = 'theme';
  const themeBtn = document.getElementById('themeBtn');

  let current = localStorage.getItem(THEME_KEY) || 'light';
  
  document.body.classList.remove('light', 'dark');
  document.body.classList.add(current);

  themeBtn.addEventListener('click', () => {
    let next = document.body.classList.contains('light') ? 'dark' : 'light';
  
    document.body.classList.remove('light', 'dark');
    document.body.classList.add(next);
    localStorage.setItem(THEME_KEY, next);
  });
})();


(function setupFont() {
  const FONT_KEY = 'fontSizePref';
  const select = document.getElementById('fontChooser');

  const sizeMap = { small: '13px', medium: '16px', large: '20px' };

  let storedLabel = localStorage.getItem(FONT_KEY);
  if (storedLabel && sizeMap[storedLabel]) {
    document.body.style.fontSize = sizeMap[storedLabel];
    select.value = storedLabel;
  } else {
    document.body.style.fontSize = sizeMap['medium'];
    select.value = 'medium';
  }

  select.addEventListener('change', () => {
    const label = select.value;
    const px = sizeMap[label] || sizeMap['medium'];
    document.body.style.fontSize = px;
    localStorage.setItem(FONT_KEY, label);
  });
})();

(function setupUsername() {
  const NAME_KEY = 'username';
  const saveBtn = document.getElementById('saveUser');
  const nameInput = document.getElementById('userName');
  const welcome = document.getElementById('welcomeText');

  function showName(name) {
    if (name && name.trim().length) {
      welcome.innerText = `Welcome, ${name.trim()}!`;
    } else {
      welcome.innerText = 'Welcome!';
    }
  }

  const stored = localStorage.getItem(NAME_KEY);
  if (stored) showName(stored);

  saveBtn.addEventListener('click', () => {
    const name = nameInput.value || '';
    localStorage.setItem(NAME_KEY, name);
    showName(name);
    nameInput.value = '';
  });
})();

(function setupSessionCounter() {
  const KEY = 'visits';
  let raw = sessionStorage.getItem(KEY);
  let num = raw ? Number(raw) : 0;
  num = Number.isNaN(num) ? 0 : num;
 
  num = num + 1;
  sessionStorage.setItem(KEY, String(num));
  document.getElementById('tabCounter').textContent =
    `This tab has been refreshed ${num} ${num === 1 ? 'time' : 'times'}.`;
})();

(function setupFeedback() {
  const FB_KEY = 'feedbackText';
  const fb = document.getElementById('feedback');

  
  const saved = sessionStorage.getItem(FB_KEY);
  if (saved !== null) {
    fb.value = saved;
  }

  fb.addEventListener('input', () => {
    sessionStorage.setItem(FB_KEY, fb.value);
  });
})();

(function setupResetButton() {
  const resetBtn = document.getElementById('resetPrefs');
  resetBtn.addEventListener('click', () => {
    
    localStorage.clear();
   
    location.reload();
  });
})();
</script>
</body>
</html>
